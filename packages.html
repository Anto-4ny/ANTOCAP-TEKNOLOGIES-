<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanfiat Technologies - packages</title>
    <meta name="description" content="Sanfiat Technologies offers top-notch products and services advertising.">
    <meta property="og:title" content="Sanfiat Technologies">
    <meta property="og:description" content="Leading provider of products and services advertisment.">
    <meta property="og:image" content=images/Photo_1723191951676.png">
    <meta property="og:url" content="https://www.sanfiat-technologies.com">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="icon" href="images/Photo_1723191951676.png" type="image/x-icon">
    <style>
        /* Basic styling, adjust as needed */
        .hidden { display: none; }
        .show { display: block; }
        .password-toggle { cursor: pointer; }
        #payment-section { margin-top: 20px; }
        .message { color: red; }
    </style>
</head>
    <header>
    <a href="index.html">
        <img id="logo" src="images/Photo_1723191951676.png" alt="Logo">
    </a>
    <button id="hamburger-icon" class="hamburger-menu">
        <img src="images/images.png" alt="Menu Icon">
    </button>
    <nav class="desktop-nav">
        <a href="dashboard.html">Dashboard</a>
        <a href="#login-section">Log in</a>
        <a href="packages.html">Packages</a>
        <a href="deposit.html">Deposit</a>
       <a href="upload.html">Upload screenshot</a>
    </nav>
    <nav id="mobile-nav" class="mobile-nav">
        <a href="dashboard.html">
            <img src="images/dashboard-icon.png" alt="Dashboard"> Dashboard
        </a>
        <a href="#login-section">
            <img src="images/login-icon.png" alt="Log in"> Log in
        </a>
        <a href="packages.html">
            <img src="images/packages-icon.png" alt="Packages"> Packages
        </a>
        <a href="deposit.html">
            <img src="images/deposit-icon.png" alt="Deposit">Deposit</a>
      <a href="upload.html">
            <img src="images/upload-icon.png" alt="upload">Upload screenshot
      </a>
    </nav>
    </header>
<body>
    

    <main>
<!-- Packages Section -->
    <section id="packages">
        <section id="packages">
            <section id="packages-section">
                <h2 style="color: white;">Purchase a package</h2>
                <section class="packages-info-box">
                    <h1>Available Packages</h1>
                    <p>Choose a package to start getting products to post on your WhatsApp status and 
                        begin earning from status views. Each package offers different levels of access
                        and earnings. Select the package that best suits your needs:</p>
                    <ul>
                        <li><strong>Basic:</strong> Purchase for Ksh 500. Pay Ksh 5 per view.</li>
                        <button class="pay-button" onclick="requestPayment('basic')" aria-label="Pay for Basic Package via MPESA">Pay via MPESA</button>
                        <li><strong>Standard:</strong> Purchase for Ksh 1000. Pay Ksh 10 per view.</li>
                        <button class="pay-button" onclick="requestPayment('standard')" aria-label="Pay for Standard Package via MPESA">Pay via MPESA</button>
                        <li><strong>Premium:</strong> Purchase for Ksh 2000. Pay Ksh 15 per view.</li>
                        <button class="pay-button" onclick="requestPayment('premium')" aria-label="Pay for Premium Package via MPESA">Pay via MPESA</button>
                        <li><strong>Ultimate:</strong> Purchase for Ksh 4000. Pay Ksh 25 per view.</li>
                        <button class="pay-button" onclick="requestPayment('ultimate')" aria-label="Pay for Ultimate Package via MPESA">Pay via MPESA</button>
                    </ul>
                    <p>Select a package and make the payment to get started!</p>
                </section>
                <div class="package-container">
                    <!-- Package 1 -->
                    <div class="package-box" style="background-color: #eaf2f8; border-color: #b3d9ff;">
                        <h3>Basic Package</h3>
                        <div class="package-price">Ksh 500</div>
                        <div class="package-description">Ideal for small campaigns.</div>
                        <div class="package-details">
                            <p>Number of Referrals Required: 5</p>
                            <p>Pay Per View: 5 Ksh</p>
                            <p>Payment Information: Click the button below to pay.</p>
                        </div>
                         <button class="pay-button" 
        onclick="window.location.href='deposit.html?packageName=Basic&packagePrice=500'" 
        aria-label="Pay for Basic Package via MPESA">
    Pay via MPESA
                         </button>
                        <div class="package-referral-link">
                            <p>Referral Link: <span id="basic-referral-link"></span></p>
                            <button onclick="copyReferralLink('basic')" aria-label="Copy Basic Package referral link">Copy Link</button>
                        </div>
                    </div>

                    <!-- Package 2 -->
                    <div class="package-box" style="background-color: #fff3e0; border-color: #ffb74d;">
                        <h3>Standard Package</h3>
                        <div class="package-price">Ksh 2800</div>
                        <div class="package-description">For moderate campaigns.</div>
                        <div class="package-details">
                            <p>Number of Referrals Required: 10</p>
                            <p>Pay Per View: 10 Ksh</p>
                            <p>Payment Information: Click the button below to pay.</p>
                        </div>
                         <button class="pay-button" 
        onclick="window.location.href='deposit.html?packageName=Standard&packagePrice=2800'" 
        aria-label="Pay for standard Package via MPESA">
    Pay via MPESA
                         </button>
                        <div class="package-referral-link">
                            <p>Referral Link: <span id="standard-referral-link"></span></p>
                            <button onclick="copyReferralLink('standard')" aria-label="Copy Standard Package referral link">Copy Link</button>
                        </div>
                    </div>

                    <!-- Package 3 -->
                    <div class="package-box" style="background-color: #e8f5e9; border-color: #a5d6a7;">
                        <h3>Premium Package</h3>
                        <div class="package-price">Ksh 4900</div>
                        <div class="package-description">For large campaigns with high impact.</div>
                        <div class="package-details">
                            <p>Number of Referrals Required: 20</p>
                            <p>Pay Per View: 3 Ksh</p>
                            <p>Payment Information: Click the button below to pay.</p>
                        </div>
                        <button class="pay-button" 
        onclick="window.location.href='deposit.html?packageName=Premium&packagePrice=4900'" 
        aria-label="Pay for Premium Package via MPESA">
    Pay via MPESA
                        </button>
                        <div class="package-referral-link">
                            <p>Referral Link: <span id="premium-referral-link"></span></p>
                            <button onclick="copyReferralLink('premium')" aria-label="Copy Premium Package referral link">Copy Link</button>
                        </div>
                    </div>

                    <!-- Package 4 -->
                    <div class="package-box" style="background-color: #fce4ec; border-color: #f48fb1;">
                        <h3>Ultimate Package</h3>
                        <div class="package-price">Ksh 6000</div>
                        <div class="package-description">For the most extensive campaigns.</div>
                        <div class="package-details">
                            <p>Number of Referrals Required: 30</p>
                            <p>Pay Per View: 2 Ksh</p>
                            <p>Payment Information: Click the button below to pay.</p>
                        </div>
                         <button class="pay-button" 
        onclick="window.location.href='deposit.html?packageName=Ultimate&packagePrice=6000'" 
        aria-label="Pay for Ultimate Package via MPESA">
    Pay via MPESA
                         </button>
                        <div class="package-referral-link">
                            <p>Referral Link: <span id="ultimate-referral-link"></span></p>
                            <button onclick="copyReferralLink('ultimate')" aria-label="Copy Ultimate Package referral link">Copy Link</button>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </section>

        <div class="package-container" id="user-packages">
  <!-- Packages will be dynamically inserted here -->
</div>

<div class="package-status" id="basic-status"></div>
<div class="package-status" id="standard-status"></div>
<div class="package-status" id="premium-status"></div>
<div class="package-status" id="ultimate-status"></div>




<script>
// Fetch user package data from Firestore and update the UI
function updatePackageStatus() {
    const userPackagesRef = firestore.collection('users').doc(userId).collection('packages');
    
    userPackagesRef.get().then(querySnapshot => {
        querySnapshot.forEach(doc => {
            const packageData = doc.data();
            const statusElement = document.getElementById(`${packageData.packageName.toLowerCase()}-status`);
            
            if (packageData.status === 'active') {
                statusElement.textContent = 'Active';
                statusElement.style.color = 'green';
            } else {
                statusElement.textContent = 'Inactive';
                statusElement.style.color = 'red';
            }
        });
    });
}

// Call the function to update the UI
updatePackageStatus();

        
    
    const userId = 'USER_ID'; // Replace with actual user ID from authentication
    const userPackagesRef = firestore.collection('users').doc(userId).collection('packages');

    // Fetch user packages and render them dynamically
    async function fetchUserPackages() {
        const userPackagesSnapshot = await userPackagesRef.get();
        const packagesContainer = document.getElementById('user-packages');
        
        userPackagesSnapshot.forEach(doc => {
            const packageData = doc.data();
            const packageElement = document.createElement('div');
            packageElement.classList.add('package-box');
            packageElement.style.backgroundColor = packageData.color; // customize package color
            
            packageElement.innerHTML = `
                <h3>${packageData.packageType} Package</h3>
                <div class="package-price">Ksh ${packageData.price}</div>
                <div class="package-description">${packageData.description}</div>
                <div class="package-details">
                    <p>Referrals Required: ${packageData.numberOfReferralsRequired}</p>
                    <p>Referrals Made: ${packageData.referralsCount}</p>
                    <p>Pay Per View: ${packageData.payPerView} Ksh</p>
                    <progress value="${packageData.referralsCount}" max="${packageData.numberOfReferralsRequired}"></progress>
                </div>
                <button class="pay-button" onclick="requestPayment('${packageData.packageType}')">Pay via MPESA</button>
                <div class="package-referral-link">
                    <p>Referral Link: <span id="${packageData.packageType}-referral-link"></span></p>
                    <button onclick="copyReferralLink('${packageData.packageType}')">Copy Link</button>
                </div>
            `;
            
            packagesContainer.appendChild(packageElement);
        });
    }
    fetchUserPackages();

    // Function to request MPESA payment
    function requestPayment(packageType) {
        // Redirect to deposit.html for payment processing
        window.location.href = `deposit.html?package=${packageType}`;
    }

    // Function to copy referral link
    function copyReferralLink(packageType) {
        const referralLink = `https://yourwebsite.com/referral/${packageType}?referrer=${userId}`;
        const referralLinkElement = document.getElementById(`${packageType}-referral-link`);
        referralLinkElement.textContent = referralLink;
        
        navigator.clipboard.writeText(referralLink)
            .then(() => alert('Referral link copied!'))
            .catch(err => alert('Failed to copy link!'));
    }
                </script>
        
    
            
    </main>
<footer>
    <div class="footer">
    <div class="footer-item">
        <a href="#home">
            <img src="images/home.png" alt="Home Icon" class="footer-icon">
            <span>Home</span>
        </a>
    </div>
    <div class="footer-item">
        <a href="#login">
            <img src="images/images.png" alt="Login Icon" class="footer-icon">
            <span>Log in</span>
        </a>
    </div>
    <div class="footer-item">
        <a href="#register">
            <img src="images/images.jpeg" alt="Register Icon" class="footer-icon">
            <span>Register</span>
        </a>
    </div>
    <div class="footer-item">
        <a href="dashboard.html">
            <img src="images/dashboard .png" alt="Dashboard Icon" class="footer-icon">
            <span>Dashboard</span>
        </a>
    </div>
    <div class="footer-item">
        <a href="packages.html">
            <img src="images/packages.png" alt="Packages Icon" class="footer-icon">
            <span>Packages</span>
        </a>
    </div>
    </div>
    
    <div class="Button">
        <a href="#dashboard">
            <p class="post-btn">
                <i class="fa fa-plus-square"></i>
            </p>
        </a>
    </div>
</footer>

    
        <p class="copyright-text">&copy; 2024 Sanfiat Technologies. All rights reserved.</p>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-storage.js"></script>

    <!-- Your custom script using Firebase -->
    <script type="module" src="script.js"></script>
</body>
    </html>
